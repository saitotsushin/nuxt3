import{_ as U,o as N,c as R,a as t,q as M,r as e,u as V,s as F,v as O,k as K,x as z,w as J,y as G,e as X,W as Q,S as Z,P as ee,V as te,D as oe,G as ne,z as j,A as le,L as se,B as q,t as E,C as b,F as re,b as $,E as ie}from"./npwvKZpc.js";const ce={},ae={class:"l-pageTitle"},ue=t("h2",{class:"font-bit"},"MY SNEAKER LIST",-1),de=[ue];function _e(D,P){return N(),R("div",ae,de)}const me=U(ce,[["render",_e]]),pe=M({__name:"Box3D_lo",props:{title:String,cgPath:String,mainColor:String,modelIndex:Number},setup(D,{expose:P,emit:c}){let x=[],S=null,w,_=!1;const g=e(null),u=D,y=c;P({container:g,sendTitle:()=>{y("getTitle",u.title)},animationPlay:()=>{_||S&&S.forEach(n=>{const o=new le(w),i=o.clipAction(n);i.setLoop(se,0),i.clampWhenFinished=!0,i.play(),x.push(o),_=!0})}});const h=V(),m=F(),v=()=>{G.to(w.rotation,{y:Math.PI*6,duration:.5,repeat:0,ease:"power1.inOut",onComplete:function(){console.log("右の要素の回転完了")}}),G.to(w.scale,{x:0,z:0,duration:.5,repeat:0,ease:"power1.inOut"}),h.showPage(Number(u.modelIndex))},f=()=>{u.title&&u.cgPath&&h.addComponent(u.title,u.cgPath,Number(u.modelIndex))};let p=null;const a=()=>{document.body.scrollHeight-window.innerHeight,document.documentElement.scrollTop,p&&clearTimeout(p),p=setTimeout(()=>{p=null},300)},T=n=>{n.forEach(o=>{o.isIntersecting&&m.setMainColor(`${u.mainColor}`)})},C=()=>{const n=new IntersectionObserver(T,{root:null,rootMargin:"-50% 0px",threshold:0});g.value&&n.observe(g.value)},l=(n,o,i)=>({init:()=>{const s=new Q({alpha:!0,antialias:!1}),r=256,I=192;s.setPixelRatio(1),s.setSize(r,I),s.setClearColor(0,0),n.value.appendChild(s.domElement);const L=new Z,Y=new ee(45,r/I,.1,70);Y.position.set(2,2,4),Y.lookAt(new te(0,1,0));const k=new oe(16777215);k.intensity=4,k.position.set(0,2,1),L.add(k),new ne().load(`${u.cgPath}`,H=>{w=H.scene,w.position.set(0,1.4,0),L.add(w),f(),S=H.animations},void 0,function(H){console.error(H)});const W=()=>{requestAnimationFrame(W),x.forEach(H=>H.update(.01)),s.render(L,Y)};W(),s.render(L,Y),j(()=>{s.dispose(),s.forceContextLoss()})}});return O(()=>{const{init:n}=l(g);n(),C(),window.addEventListener("scroll",a)}),K(()=>{window.removeEventListener("scroll",a)}),(n,o)=>{const i=X;return N(),z(i,{to:`/sneaker/${D.modelIndex}`,onClick:v},{default:J(()=>[t("div",{class:"webGLbox",ref_key:"container",ref:g},null,512)]),_:1},8,["to"])}}}),ge=q("/images/scroll_arrow_top.png"),he=q("/images/scroll_arrow_bottom.png"),ve={class:"ScrollBar"},fe=t("img",{src:ge,class:"ScrollBarArrow ScrollBarArrow--top"},null,-1),we=t("img",{src:he,class:"ScrollBarArrow ScrollBarArrow--bottom"},null,-1),be=t("div",{class:"custom-scrollbar-thumb-inner"},null,-1),xe=[be],Se={class:"debug"},Ce=M({__name:"ScrollBar",setup(D){const P=e(null),c=e(null),x=e(""),S=e(""),w=e(""),_=e(""),g=e(""),u=e(""),y=e(""),A=e(""),B=e("");return O(()=>{const h=document.querySelector(".l-wrapper");if(!h)return;let m=h.scrollHeight,v=window.innerHeight,f=v/m*v,p=window.scrollY,a=p/m*v+15;c.value&&(c.value.style.height=`${f}px`,c.value.style.transform=`translateY(${a}px)`),window.addEventListener("scroll",()=>{T||c.value&&(p=window.scrollY,a=p/m*v,a<15&&(a=15),a>window.innerHeight-f-15&&(a=window.innerHeight-f-15),c.value.style.transform=`translateY(${a}px)`)});let T=!1,C,l,n;c.value&&(c.value.addEventListener("mousedown",o=>{T=!0,C=o.pageY,n=o.clientY,y.value=C.toString(),p=window.scrollY,a=p/m*v,l=window.scrollY,A.value=l.toString(),document.body.style.userSelect="none"}),x.value=h.clientHeight.toString(),S.value=h.scrollHeight.toString(),document.addEventListener("mousemove",o=>{if(T){const i=o.pageY-C,d=o.clientY-n,s=d/window.innerHeight*document.documentElement.scrollHeight;if(window.scrollTo(0,l+s),u.value=o.pageY.toString(),y.value=C.toString(),_.value=i.toString(),g.value=s.toString(),c.value){let r=d/window.innerHeight*v+a;c.value.style.transform=`translateY(${r}px)`,B.value=r.toString(),r<15&&(r=15,c.value.style.transform=`translateY(${r}px)`,B.value=a.toString()),r>window.innerHeight-f-15&&(r=window.innerHeight-f-15,c.value.style.transform=`translateY(${r}px)`,B.value=a.toString())}}}),document.addEventListener("mouseup",()=>{T=!1,document.body.style.userSelect=""}))}),(h,m)=>(N(),R(re,null,[t("div",ve,[fe,we,t("div",{ref_key:"customScrollbar",ref:P,class:"custom-scrollbar"},[t("div",{ref_key:"scrollbarThumb",ref:c,class:"custom-scrollbar-thumb"},xe,512)],512)]),t("div",Se,[t("div",null,"高さ: "+E(b(x)),1),t("div",null,"スクロール高さ: "+E(b(S)),1),t("div",null,"イベント名: "+E(b(w)),1),t("div",null,"deltaY: "+E(b(_)),1),t("div",null,"debug_scrollDelta: "+E(b(g)),1),t("div",null,"debug_pageY: "+E(b(u)),1),t("div",null,"debug_startY: "+E(b(y)),1),t("div",null,"debug_startScrollTop: "+E(b(A)),1),t("div",null,"debug_thumbPosition: "+E(b(B)),1)])],64))}}),Ee={class:"l-content-scroll"},ye={class:"l-content-wrapper"},Be={class:"l-content-wrapper-inner"},Te={class:"l-selectCursor"},Le={class:"p-selectCursor"},Pe={__name:"index",setup(D){e("/"),e([]),ie("scrollContent");const P=F(),c=e(null),x=e(null),S=e(null),w=e(!1),_=e(""),g=e(null),u=e(null),y=e(null),A=e(null),B=e(null);e(!1);let h="";const m=l=>{_.value=l},v=e(!1),f=()=>{const l=B.value.getBoundingClientRect(),n=1,o=l.width*n,i=l.height*n,d=l.left+l.width/2,s=l.top+l.height/2,r={left:d-o/2,right:d+o/2,top:s-i/2,bottom:s+i/2},I=[g,u,y,A];v.value=I.some(L=>{const Y=L.value.container.getBoundingClientRect();let k=!1;return r.top>Y.top&&r.bottom<Y.bottom&&(L.value.sendTitle(),L.value.animationPlay(),k=!0,T(),a()),k||(_.value=""),k})},p=()=>{window.scrollY===0&&P.setMainBasicColor()},a=()=>{if(console.log("title.value",_.value),h==_.value)return;h=_.value,x.value.innerHTML="";const l=_.value.split("");var n=[];l.forEach((d,s)=>{const r=document.createElement("span");d==" "&&r.classList.add("nameSpacer"),r.textContent=d,n.push(r)});const o=document.createElement("div");o.classList.add("nameList"),n.forEach((d,s)=>{o.appendChild(n[s])}),x.value.appendChild(o),o.querySelectorAll("span").forEach((d,s)=>{setTimeout(()=>{d.style.display="block"},s*100)})},T=()=>{v.value!=!0&&(document.documentElement.style.overflow="hidden",setTimeout(function(){document.documentElement.style.overflow=""},500))},C=()=>{if(!S.value)return;const l=S.value.getBoundingClientRect();w.value=l.top<=0};return O(()=>{window.addEventListener("scroll",C),f(),window.addEventListener("scroll",f),window.addEventListener("scroll",p)}),j(()=>{window.removeEventListener("scroll",C)}),K(()=>{window.removeEventListener("scroll",f)}),(l,n)=>{const o=me,i=pe,d=Ce;return N(),R("div",null,[t("div",Ee,[t("div",ye,[t("div",Be,[t("div",Te,[t("div",Le,[t("div",{class:"c-selectCursor",ref_key:"selectCursor",ref:B},null,512),t("div",{class:"c-selectCursor-title",ref_key:"selectCursorTitle",ref:x},null,512)])]),$(o),$(i,{ref_key:"Box3D_lo_1",ref:g,modelIndex:"1",title:"NIKE AIR JORDAN 2",cgPath:"/nuxt3/object/sneaker_lo.glb",mainColor:"#473acc",onGetTitle:m},null,512),$(i,{ref_key:"Box3D_lo_2",ref:u,modelIndex:"2",title:"NIKE DUNK LOW Pro B",cgPath:"/nuxt3/object/sneaker_lo_2.glb",mainColor:"#F00",onGetTitle:m},null,512),$(i,{ref_key:"Box3D_lo_3",ref:y,modelIndex:"3",title:"NIKE SNEAKER AAAAA",cgPath:"/nuxt3/object/sneaker_lo_others.glb",mainColor:"#333",onGetTitle:m},null,512),$(i,{ref_key:"Box3D_lo_4",ref:A,modelIndex:"4",title:"NIKE OTHERS",cgPath:"/nuxt3/object/sneaker_lo_others.glb",mainColor:"#333",onGetTitle:m},null,512)])])]),$(d,{scrollContent:b(c)},null,8,["scrollContent"])])}}};export{Pe as default};
