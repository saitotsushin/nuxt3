import{_ as ge,o as O,c as J,a as t,q as X,r as e,u as le,s as Q,v as K,k as Z,j as we,x as se,w as re,y as z,e as ie,t as I,W as ce,z as xe,S as q,P as V,V as ae,A as be,B as Se,M as Ce,D as ue,G as de,C as ee,E as me,L as ve,F as _e,H as b,I as Pe,b as M,J as ye}from"./BJ_ANt-V.js";import{v as Ee}from"./C74dAFiS.js";const Te={},Ae={class:"l-pageTitle"},Be=t("h2",{class:"font-bit"},"MY SNEAKER LIST",-1),Le=[Be];function ke(D,S){return O(),J("div",Ae,Le)}const Ie=ge(Te,[["render",ke]]),Ye=`uniform sampler2D uTexture;
varying vec2 vUv;
// uniform float uPos;
uniform float uPercent;
uniform float uTime;
  
void main(void){
    // vec4 color = texture2D(uTexture, vUv);
    vec2 uv = vUv;

    float moz = uPercent * 0.02;

    if( moz > 0. ) {// 0では割れないので、if文で保護
        uv = floor( uv / moz ) * moz + ( moz * .5 );
    }

    vec3 color = texture2D( uTexture, uv ).rgb;

    gl_FragColor = LinearTosRGB(vec4( color, 1.0 ));

    // // グレースケールフィルター
    // float gray = dot(color.rgb, vec3(0.299, 0.587, 0.114));
    // // gl_FragColor = vec4(vec3(gray), color.a);
    // gl_FragColor = LinearTosRGB(vec4(vec3(gray), color.a));
}`,W=4,j=.05,F=1,De=X({__name:"Box3D_lo_mos",props:{title:String,cgPath:String,mainColor:String,modelIndex:Number,isActive:{type:Boolean,default:!1}},setup(D,{expose:S,emit:m}){const y=e(null),r=D;let v=F;const $=m,_=le(),p=Q();let k=[],Y=null,B=null,g=null,w=null,f=null,E=null,i,d=!1,C=!1,x=!1;const c=()=>{$("getTitle",r.title)},l=()=>{d||Y&&Y.forEach(a=>{const T=new me(i),A=T.clipAction(a);A.setLoop(ve,0),A.clampWhenFinished=!0,A.play(),k.push(T),d=!0})},n=()=>{z.to(i.rotation,{y:Math.PI*6,duration:.5,repeat:0,ease:"power1.inOut",onComplete:function(){}}),z.to(i.scale,{x:0,z:0,duration:.5,repeat:0,ease:"power1.inOut"}),_.showPage(Number(r.modelIndex))},h=()=>{r.title&&r.cgPath&&_.addComponent(r.title,r.cgPath,Number(r.modelIndex))};let o;const s=a=>{a.forEach(T=>{T.isIntersecting&&p.setMainColor(`${r.mainColor}`)})},u=()=>{const a=new IntersectionObserver(s,{root:null,rootMargin:"-50% 0px",threshold:0});y.value&&a.observe(y.value)},H=(a,T,A)=>({init:()=>{const P=new ce({alpha:!0,antialias:!1}),L=256,R=192;B=new xe(L,R),P.setPixelRatio(1),P.setSize(L,R),a.value.appendChild(P.domElement),g=new q,w=new V(45,L/R,.1,70),w.position.set(2,2,4),w.lookAt(new ae(0,1.4,0)),f=new q;const te=60,pe=te/2*(Math.PI/180),ne=R/2/Math.tan(pe);E=new V(te,L/R,1,ne*2),E.position.z=ne;const fe=new be(L,R);o=new Se({uniforms:{uPercent:{value:W},uTexture:{value:B.texture}},vertexShader:Ee,fragmentShader:Ye});const he=new Ce(fe,o);f.add(he);const U=new ue(16777215);U.intensity=4,U.position.set(2,2,1),g.add(U),new de().load(`${r.cgPath}`,N=>{i=N.scene,i.position.set(0,1.4,0),g.add(i),h(),Y=N.animations},void 0,function(N){console.error(N)});const oe=()=>{requestAnimationFrame(oe),k.forEach(N=>N.update(.01)),console.log("mat.uniforms.uPercent.value="+o.uniforms.uPercent.value+"/mosPer="+W),(C||x)&&(v-=j),C&&(v-j<0&&(o.uniforms.uPercent.value-=F,v=F),o.uniforms.uPercent.value==0&&(o.uniforms.uPercent.value=0,C=!1)),x&&(v-j<0&&(o.uniforms.uPercent.value+=F,v=F),o.uniforms.uPercent.value==W&&(o.uniforms.uPercent.value=W,x=!1)),P.setRenderTarget(B),P.clear(),P.render(g,w),P.setRenderTarget(null),P.clear(),P.render(f,E)};oe(),ee(()=>{P.dispose(),P.forceContextLoss()})}});return K(()=>{const{init:a}=H(y);a(),u()}),Z(()=>{}),we(()=>r.isActive,a=>{a?(console.log("isActive が true になりました"),C=!0,x=!1):(console.log("isActive が false になりました"),C=!1,x=!0)}),S({container:y,sendTitle:c,animationPlay:l}),(a,T)=>{const A=ie;return O(),se(A,{to:`/sneaker/${D.modelIndex}`,onClick:n,class:"c-sneaker-list"},{default:re(()=>[t("div",null,I(D.isActive),1),t("div",{class:"webGLbox",ref_key:"container",ref:y},null,512)]),_:1},8,["to"])}}}),$e=X({__name:"Box3D_lo",props:{title:String,cgPath:String,mainColor:String,modelIndex:Number},setup(D,{expose:S,emit:m}){let y=[],r=null,v,$=!1;const _=e(null),p=D,k=m;S({container:_,sendTitle:()=>{k("getTitle",p.title)},animationPlay:()=>{$||r&&r.forEach(l=>{const n=new me(v),h=n.clipAction(l);h.setLoop(ve,0),h.clampWhenFinished=!0,h.play(),y.push(n),$=!0})}});const g=le(),w=Q(),f=()=>{z.to(v.rotation,{y:Math.PI*6,duration:.5,repeat:0,ease:"power1.inOut",onComplete:function(){}}),z.to(v.scale,{x:0,z:0,duration:.5,repeat:0,ease:"power1.inOut"}),g.showPage(Number(p.modelIndex))},E=()=>{p.title&&p.cgPath&&g.addComponent(p.title,p.cgPath,Number(p.modelIndex))};let i=null;const d=()=>{document.body.scrollHeight-window.innerHeight,document.documentElement.scrollTop,i&&clearTimeout(i),i=setTimeout(()=>{i=null},300)},C=l=>{l.forEach(n=>{n.isIntersecting&&w.setMainColor(`${p.mainColor}`)})},x=()=>{const l=new IntersectionObserver(C,{root:null,rootMargin:"-50% 0px",threshold:0});_.value&&l.observe(_.value)},c=(l,n,h)=>({init:()=>{const s=new ce({alpha:!0,antialias:!1}),u=256,H=192;s.setPixelRatio(1),s.setSize(u,H),s.setClearColor(0,0),l.value.appendChild(s.domElement);const a=new q,T=new V(45,u/H,.1,70);T.position.set(2,2,4),T.lookAt(new ae(0,1,0));const A=new ue(16777215);A.intensity=4,A.position.set(0,2,1),a.add(A),new de().load(`${p.cgPath}`,L=>{v=L.scene,v.position.set(0,1.4,0),a.add(v),E(),r=L.animations},void 0,function(L){console.error(L)});const P=()=>{requestAnimationFrame(P),y.forEach(L=>L.update(.01)),s.render(a,T)};P(),s.render(a,T),ee(()=>{s.dispose(),s.forceContextLoss()})}});return K(()=>{const{init:l}=c(_);l(),x(),window.addEventListener("scroll",d)}),Z(()=>{window.removeEventListener("scroll",d)}),(l,n)=>{const h=ie;return O(),se(h,{to:`/sneaker/${D.modelIndex}`,onClick:f,class:"c-sneaker-list"},{default:re(()=>[t("div",{class:"webGLbox",ref_key:"container",ref:_},null,512)]),_:1},8,["to"])}}}),He=_e("/images/scroll_arrow_top.png"),Re=_e("/images/scroll_arrow_bottom.png"),Ne={class:"ScrollBar"},Me=t("img",{src:He,class:"ScrollBarArrow ScrollBarArrow--top"},null,-1),Ge=t("img",{src:Re,class:"ScrollBarArrow ScrollBarArrow--bottom"},null,-1),Fe=t("div",{class:"custom-scrollbar-thumb-inner"},null,-1),Oe=[Fe],We={class:"debug"},ze=X({__name:"ScrollBar",setup(D){const S=e(null),m=e(null),y=e(""),r=e(""),v=e(""),$=e(""),_=e(""),p=e(""),k=e(""),Y=e(""),B=e("");return K(()=>{const g=document.querySelector(".l-wrapper");if(!g)return;let w=g.scrollHeight,f=window.innerHeight,E=f/w*f,i=window.scrollY,d=i/w*f+15;m.value&&(m.value.style.height=`${E}px`,m.value.style.transform=`translateY(${d}px)`),window.addEventListener("scroll",()=>{C||m.value&&(i=window.scrollY,d=i/w*f,d<15&&(d=15),d>window.innerHeight-E-15&&(d=window.innerHeight-E-15),m.value.style.transform=`translateY(${d}px)`)});let C=!1,x,c,l;m.value&&(m.value.addEventListener("mousedown",n=>{C=!0,x=n.pageY,l=n.clientY,k.value=x.toString(),i=window.scrollY,d=i/w*f,c=window.scrollY,Y.value=c.toString(),document.body.style.userSelect="none"}),y.value=g.clientHeight.toString(),r.value=g.scrollHeight.toString(),document.addEventListener("mousemove",n=>{if(C){const h=n.pageY-x,o=n.clientY-l,s=o/window.innerHeight*document.documentElement.scrollHeight;if(window.scrollTo(0,c+s),p.value=n.pageY.toString(),k.value=x.toString(),$.value=h.toString(),_.value=s.toString(),m.value){let u=o/window.innerHeight*f+d;m.value.style.transform=`translateY(${u}px)`,B.value=u.toString(),u<15&&(u=15,m.value.style.transform=`translateY(${u}px)`,B.value=d.toString()),u>window.innerHeight-E-15&&(u=window.innerHeight-E-15,m.value.style.transform=`translateY(${u}px)`,B.value=d.toString())}}}),document.addEventListener("mouseup",()=>{C=!1,document.body.style.userSelect=""}))}),(g,w)=>(O(),J(Pe,null,[t("div",Ne,[Me,Ge,t("div",{ref_key:"customScrollbar",ref:S,class:"custom-scrollbar"},[t("div",{ref_key:"scrollbarThumb",ref:m,class:"custom-scrollbar-thumb"},Oe,512)],512)]),t("div",We,[t("div",null,"高さ: "+I(b(y)),1),t("div",null,"スクロール高さ: "+I(b(r)),1),t("div",null,"イベント名: "+I(b(v)),1),t("div",null,"deltaY: "+I(b($)),1),t("div",null,"debug_scrollDelta: "+I(b(_)),1),t("div",null,"debug_pageY: "+I(b(p)),1),t("div",null,"debug_startY: "+I(b(k)),1),t("div",null,"debug_startScrollTop: "+I(b(Y)),1),t("div",null,"debug_thumbPosition: "+I(b(B)),1)])],64))}}),Ke={class:"l-content-scroll"},Ue={class:"l-content-wrapper"},je={class:"l-content-wrapper-inner"},qe={class:"l-selectCursor"},Ve={class:"p-selectCursor"},Je={style:{position:"fixed",top:"10px",right:"40px"}},et={__name:"index",setup(D){e("/");const S=e(-1);e([]),ye("scrollContent");const m=Q(),y=e(null),r=e(null),v=e(null),$=e(!1),_=e(""),p=e(null),k=e(null),Y=e(null),B=e(null),g=e(null);e(!1);let w="";const f=c=>{_.value=c},E=e(!1),i=()=>{const c=g.value.getBoundingClientRect(),l=1,n=c.width*l,h=c.height*l,o=c.left+c.width/2,s=c.top+c.height/2,u={left:o-n/2,right:o+n/2,top:s-h/2,bottom:s+h/2},H=[p,k,Y,B];E.value=H.some((a,T)=>{const A=a.value.container.getBoundingClientRect();let G=!1;return u.top>A.top&&u.bottom<A.bottom&&(a.value.sendTitle(),a.value.animationPlay(),G=!0,S.value=T,C()),G||(S.value=-1,_.value=""),G})},d=()=>{window.scrollY===0&&m.setMainBasicColor()},C=()=>{if(w==_.value)return;w=_.value,r.value.innerHTML="";const c=_.value.split("");var l=[];c.forEach((o,s)=>{const u=document.createElement("span");o==" "&&u.classList.add("nameSpacer"),u.textContent=o,l.push(u)});const n=document.createElement("div");n.classList.add("nameList"),l.forEach((o,s)=>{n.appendChild(l[s])}),r.value.appendChild(n),n.querySelectorAll("span").forEach((o,s)=>{setTimeout(()=>{o.style.display="block"},s*100)})},x=()=>{if(!v.value)return;const c=v.value.getBoundingClientRect();$.value=c.top<=0};return K(()=>{window.addEventListener("scroll",x),i(),window.addEventListener("scroll",i),window.addEventListener("scroll",d)}),ee(()=>{window.removeEventListener("scroll",x)}),Z(()=>{window.removeEventListener("scroll",i)}),(c,l)=>{const n=Ie,h=De,o=$e,s=ze;return O(),J("div",null,[t("div",Ke,[t("div",Ue,[t("div",je,[t("div",qe,[t("div",Ve,[t("div",{class:"c-selectCursor",ref_key:"selectCursor",ref:g},null,512),t("div",{class:"c-selectCursor-title",ref_key:"selectCursorTitle",ref:r},null,512)])]),M(n),t("div",Je,I(b(S)),1),M(h,{ref_key:"Box3D_lo_1",ref:p,modelIndex:"1",title:"NIKE AIR JORDAN 2",cgPath:"/nuxt3/object/sneaker_lo.glb",mainColor:"#473acc",isActive:b(S)===0,onGetTitle:f},null,8,["isActive"]),M(h,{ref_key:"Box3D_lo_2",ref:k,modelIndex:"2",title:"NIKE DUNK LOW Pro B",cgPath:"/nuxt3/object/sneaker_lo_2.glb",mainColor:"#F00",isActive:b(S)===1,onGetTitle:f},null,8,["isActive"]),M(o,{ref_key:"Box3D_lo_3",ref:Y,modelIndex:"3",title:"NIKE SNEAKER AAAAA",cgPath:"/nuxt3/object/sneaker_lo_others.glb",mainColor:"#333",isActive:b(S)===2,onGetTitle:f},null,8,["isActive"]),M(o,{ref_key:"Box3D_lo_4",ref:B,modelIndex:"4",title:"NIKE OTHERS",cgPath:"/nuxt3/object/sneaker_lo_others.glb",mainColor:"#333",isActive:b(S)===3,onGetTitle:f},null,8,["isActive"])])])]),M(s,{scrollContent:b(y)},null,8,["scrollContent"])])}}};export{et as default};
