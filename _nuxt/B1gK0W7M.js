import{_ as q,a as Y,b as J}from"./C-CQfHyh.js";import{A as X,r as n,u as F,B as K,q as H,k as z,o as U,C as Q,w as Z,D as j,e as ee,a as i,W as te,S as oe,P as ne,E as se,F as le,G as ie,s as V,H as re,L as ce,c as ae,x as R,v as o,t as p,b as y}from"./CMkLAwN6.js";import"./C74dAFiS.js";import"./DMAXLEiR.js";const ue=X({__name:"Box3D_lo",props:{title:String,cgPath:String,mainColor:String,modelIndex:String},setup(S,{expose:u,emit:E}){let h=[],C=null,f,L=!1;const _=n(null),c=S,k=E;u({container:_,sendTitle:()=>{k("getTitle",c.title)},animationPlay:()=>{L||C&&C.forEach(r=>{const t=new re(f),a=t.clipAction(r);a.setLoop(ce,0),a.clampWhenFinished=!0,a.play(),h.push(t),L=!0})}});const D=F(),I=K(),M=()=>{j.to(f.rotation,{y:Math.PI*6,duration:.5,repeat:0,ease:"power1.inOut",onComplete:function(){}}),j.to(f.scale,{x:0,z:0,duration:.5,repeat:0,ease:"power1.inOut"}),D.showPage(Number(c.modelIndex))},N=()=>{c.title&&c.cgPath&&D.addComponent(c.title,c.cgPath,Number(c.modelIndex))};let e=null;const g=()=>{document.body.scrollHeight-window.innerHeight,document.documentElement.scrollTop,e&&clearTimeout(e),e=setTimeout(()=>{e=null},300)},O=r=>{r.forEach(t=>{t.isIntersecting&&I.setMainColor(`${c.mainColor}`)})},B=()=>{const r=new IntersectionObserver(O,{root:null,rootMargin:"-50% 0px",threshold:0});_.value&&r.observe(_.value)},G=(r,t,a)=>({init:()=>{const l=new te({alpha:!0,antialias:!1}),v=256,x=192;l.setPixelRatio(1),l.setSize(v,x),l.setClearColor(0,0),r.value.appendChild(l.domElement);const s=new oe,w=new ne(45,v/x,.1,70);w.position.set(2,2,4),w.lookAt(new se(0,1,0));const b=new le(16777215);b.intensity=4,b.position.set(0,2,1),s.add(b),new ie().load(`${c.cgPath}`,m=>{f=m.scene,f.position.set(0,1.4,0),s.add(f),N(),C=m.animations},void 0,function(m){console.error(m)});const d=()=>{requestAnimationFrame(d),h.forEach(m=>m.update(.01)),l.render(s,w)};d(),l.render(s,w),V(()=>{l.dispose(),l.forceContextLoss()})}});return H(()=>{const{init:r}=G(_);r(),B(),window.addEventListener("scroll",g)}),z(()=>{window.removeEventListener("scroll",g)}),(r,t)=>{const a=ee;return U(),Q(a,{to:`/sneaker/${S.modelIndex}`,onClick:M,class:"c-sneaker-list"},{default:Z(()=>[i("div",{class:"webGLbox",ref_key:"container",ref:_},null,512)]),_:1},8,["to"])}}}),de={class:"l-content-scroll"},me={class:"l-content-wrapper"},pe={class:"l-content-wrapper-inner"},he={class:"l-selectCursor"},xe={__name:"index_v0",setup(S){const u=n(-1),E=K(),h=F();n(null);const C=n(null),f=n(!1),L=n(""),_=n(null),c=n(null),k=n(null),P=n(null),T=n(null);n(!1);const D=n(null),I=n(null),M=n(null),N=n(null),e=n({topLeft:{x:"0",y:"0"},topRight:{x:"0",y:"0"},bottomLeft:{x:"0",y:"0"},bottomRight:{x:"0",y:"0"}}),g=t=>{L.value=t},O=n(!1),B=()=>{const t=T.value.getBoundingClientRect(),a=1,A=t.width*a,l=t.height*a,v=t.left+t.width/2,x=t.top+t.height/2,s={left:v-A/2,right:v+A/2,top:x-l/2,bottom:x+l/2};e.value.topLeft.x=Math.floor(s.left),e.value.topLeft.y=Math.floor(s.top),e.value.topRight.x=Math.floor(s.right),e.value.topRight.y=Math.floor(s.top),e.value.bottomLeft.x=Math.floor(s.left),e.value.bottomLeft.y=Math.floor(s.bottom),e.value.bottomRight.x=Math.floor(s.right),e.value.bottomRight.y=Math.floor(s.bottom);const w=[_,c,k,P];O.value=w.some((b,$)=>{const d=b.value.container.getBoundingClientRect(),m={x:(d.right-d.left)/2+d.left,y:(d.bottom-d.top)/2+d.top};let W=!1;return s.top<m.y&&m.y<s.bottom&&(b.value.sendTitle(),b.value.animationPlay(),W=!0,u.value=$),W||(u.value=-1,L.value=""),W})},G=()=>{window.scrollY===0&&E.setMainBasicColor()},r=()=>{if(!C.value)return;const t=C.value.getBoundingClientRect();f.value=t.top<=0};return H(()=>{window.addEventListener("scroll",r),B(),window.addEventListener("scroll",B),window.addEventListener("scroll",G)}),V(()=>{window.removeEventListener("scroll",r)}),z(()=>{window.removeEventListener("scroll",B)}),(t,a)=>{const A=Y,l=q,v=ue,x=J;return U(),ae("div",null,[i("div",de,[i("div",me,[i("div",pe,[i("div",he,[i("div",{class:R(["p-selectCursor",{isDebug:o(h).isDebug}])},[i("div",{class:R(["c-selectCursor",{isDebug:o(h).isDebug}]),ref_key:"selectCursor",ref:T},[i("div",{class:R(["c-selectCursor-pos debugBox",{isActive:o(h).isDebug}])},[i("div",{class:"c-selectCursor-pos-disp -topLeft",ref_key:"selectCursorTopLeft",ref:D}," ("+p(o(e).topLeft.x)+","+p(o(e).topLeft.y)+") ",513),i("div",{class:"c-selectCursor-pos-disp -topRight",ref_key:"selectCursorTopRight",ref:I}," ("+p(o(e).topRight.x)+","+p(o(e).topRight.y)+") ",513),i("div",{class:"c-selectCursor-pos-disp -bottomLeft",ref_key:"selectCursorBottomLeft",ref:M}," ("+p(o(e).bottomLeft.x)+","+p(o(e).bottomLeft.y)+") ",513),i("div",{class:"c-selectCursor-pos-disp -bottomRight",ref_key:"selectCursorBottomRight",ref:N}," ("+p(o(e).bottomRight.x)+","+p(o(e).bottomRight.y)+") ",513)],2),i("div",{class:R(["c-selectCursor-name",{isActive:o(h).isDebug}])}," Touch Area ",2)],2)],2)]),y(A),i("div",{class:R(["debugBox debugShowActiveObjIndex",{isActive:o(h).isDebug}])}," Active Obj index: "+p(o(u)),3),y(l,{ref_key:"Box3D_lo_1",ref:_,modelIndex:"1",title:"NIKE AIR JORDAN 2",cgPath:"/nuxt3/object/sneaker_lo.glb",mainColor:"#473acc",isActive:o(u)===0,onGetTitle:g},null,8,["isActive"]),y(l,{ref_key:"Box3D_lo_2",ref:c,modelIndex:"2",title:"NIKE DUNK LOW Pro B",cgPath:"/nuxt3/object/sneaker_lo_2.glb",mainColor:"#F00",isActive:o(u)===1,onGetTitle:g},null,8,["isActive"]),y(v,{ref_key:"Box3D_lo_3",ref:k,modelIndex:"3",title:"NIKE SNEAKER AAAAA",cgPath:"/nuxt3/object/sneaker_lo_others.glb",mainColor:"#333",isActive:o(u)===2,onGetTitle:g},null,8,["isActive"]),y(v,{ref_key:"Box3D_lo_4",ref:P,modelIndex:"4",title:"NIKE OTHERS",cgPath:"/nuxt3/object/sneaker_lo_others.glb",mainColor:"#333",isActive:o(u)===3,onGetTitle:g},null,8,["isActive"])])])]),y(x)])}}};export{xe as default};
